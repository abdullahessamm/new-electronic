import{_ as k,a as p,u as x,L as y,l as $,r as a,o,c as n,g as c,b as t,d as l,t as r,m as C,v as U,i as B,j as z,w as d,e as u,h as _,T as A,n as D}from"./index-f80301b3.js";import{u as L}from"./users-0a14109c.js";import{A as V}from"./AddButton-76f99f7f.js";const N={name:"UsersIndexPage",data:()=>({availableAbilities:p,authStore:x(),usersStore:L(),initializing:!1,filterString:""}),methods:{deleteUser(e){this.$swal.fire({icon:"question",title:`حذف ${e.f_name} ${e.l_name}؟`}).then(i=>{i.isConfirmed&&(e.deleting=!0,this.usersStore.delete(e).catch(m=>{this.$swal.fire({icon:"error",title:"خطأ فى الشبكة.",showConfirmButton:!1})}).finally(()=>delete e.deleting))})}},mounted(){if(!this.authStore.can(p.users.index)){this.$router.push({name:"home"});return}this.usersStore.numOfUsers<1&&(this.initializing=!0,this.usersStore.initialize().catch(e=>{this.$swal.fire({icon:"error",title:"حدث خطأ ما تأكد من اتصالك بالانترنت.",showConfirmButton:!1})}).finally(()=>this.initializing=!1))},components:{LoadingPage:y,AddButton:V,LoadingComponent:$}},T={class:"users-index-page h-100 pb-5 overflow-auto position-relative"},P={key:1,class:"py-4"},I={class:"container-fluid"},O={class:"row"},j={class:"col-12"},q={class:"row mt-5"},E={class:"col-12 col-md-6 col-lg-3 px-lg-5 px-1 px-0 mb-3"},F={class:"col-12 px-lg-5 px-0 overflow-x-auto"},M={key:0,class:"text-center mt-5"},G={key:1,class:"table table-borderless overflow-x-auto"},H=t("thead",{class:"bg-color-main"},[t("tr",null,[t("th",{scope:"col",class:"bg-transparent text-white px-3"},"المستخدم"),t("th",{scope:"col",class:"bg-transparent text-white px-3"},"اسم المستخدم"),t("th",{scope:"col",class:"bg-transparent text-white px-3"},"تاريخ التسجيل"),t("th",{scope:"col",class:"bg-transparent text-white px-3"})])],-1),J={class:"px-3"},K={key:0},Q={key:1},R=t("br",null,null,-1),W={class:"px-3"},X={class:"px-3"},Y={class:"px-3"},Z=["onClick"],ee={key:1};function te(e,i,m,se,oe,f){const g=a("loading-page"),h=a("font-awesome-icon"),b=a("router-link"),v=a("loading-component"),w=a("router-view"),S=a("add-button");return o(),n("div",T,[e.initializing?(o(),c(g,{key:0,color:"#135ea2"})):(o(),n("div",P,[t("div",I,[t("div",O,[t("div",j,[t("h5",null,[l(h,{icon:"fa-solid fa-users"}),t("span",null," المستخدمين ("+r(e.usersStore.numOfUsers)+") ",1)])])]),t("div",q,[t("div",E,[C(t("input",{type:"text",class:"form-control",placeholder:"بحث","onUpdate:modelValue":i[0]||(i[0]=s=>e.filterString=s)},null,512),[[U,e.filterString]])]),t("div",F,[e.usersStore.search(e.filterString).length==0?(o(),n("div",M," لا يوجد نتائج ")):(o(),n("table",G,[H,t("tbody",null,[(o(!0),n(B,null,z(e.usersStore.search(e.filterString),s=>(o(),n("tr",{key:s.id},[t("td",J,[l(b,{to:`/users/show/${s.id}`,class:"text-decoration-none text-black"},{default:d(()=>[s.id===e.authStore.user.id?(o(),n("b",K," أنت ")):(o(),n("b",Q,r(s.f_name)+" "+r(s.l_name),1)),_(),R,t("span",null,r(s.email),1)]),_:2},1032,["to"])]),t("td",W,r(s.username),1),t("td",X,r(new Date(s.created_at).toLocaleDateString()),1),t("td",Y,[s.id!==1&&e.authStore.can(e.availableAbilities.users.delete)?(o(),n("button",{key:0,class:"btn btn-danger",onClick:()=>f.deleteUser(s)},[s.deleting?(o(),c(v,{key:0,width:"20px"})):(o(),n("span",ee,[l(h,{icon:"fa-solid fa-trash"}),_(" حذف ")]))],8,Z)):u("",!0)])]))),128))])]))])])])])),l(w,null,{default:d(({Component:s})=>[l(A,{name:"page"},{default:d(()=>[(o(),c(D(s)))]),_:2},1024)]),_:1}),!e.initializing&&e.authStore.can(e.availableAbilities.users.create)?(o(),n("div",{key:2,class:"floating-btn floating-btn-left floating-btn-bottom m-3 d-inline-flex",onClick:i[1]||(i[1]=s=>e.$router.push({name:"users.add"}))},[l(S)])):u("",!0)])}const le=k(N,[["render",te]]);export{le as default};
