import{_ as k,a as p,u as w,L as x,l as S,r as a,o,c as s,g as c,b as t,d as i,t as d,e as r,i as $,j as C,w as h,h as B,T as A,n as z}from"./index-f80301b3.js";import{A as L}from"./AddButton-76f99f7f.js";import{u as N}from"./employees-dded7178.js";const V={name:"UsersIndexPage",data:()=>({availableAbilities:p,authStore:w(),empsStore:N(),initializing:!1}),methods:{deleteUser(e){this.$swal.fire({icon:"question",title:`حذف ${e.name}؟`}).then(l=>{l.isConfirmed&&(e.deleting=!0,this.empsStore.delEmp(e.id).catch(m=>{this.$swal.fire({icon:"error",title:"خطأ فى الشبكة.",showConfirmButton:!1})}).finally(()=>delete e.deleting))})}},mounted(){if(!this.authStore.can(p.employees.index)){this.$router.push({name:"home"});return}this.empsStore.$state.employees.length<1&&(this.initializing=!0,this.empsStore.sync().catch(e=>{this.$swal.fire({icon:"error",title:"حدث خطأ ما تأكد من اتصالك بالانترنت.",showConfirmButton:!1})}).finally(()=>this.initializing=!1))},components:{LoadingPage:x,AddButton:L,LoadingComponent:S}},E={class:"users-index-page h-100 pb-5 overflow-auto position-relative"},P={key:1,class:"py-4"},T={class:"container-fluid"},U={class:"row"},D={class:"col-12"},I={class:"row mt-5"},O={class:"col-12 px-lg-5 px-0 overflow-x-auto"},j={key:0,class:"text-center mt-5"},q={key:1,class:"table table-borderless overflow-x-auto"},F={class:"bg-color-main"},G=t("th",{scope:"col",class:"bg-transparent text-white px-3"},"اسم الموظف",-1),H={key:0,scope:"col",class:"bg-transparent text-white px-3"},J=t("th",{scope:"col",class:"bg-transparent text-white px-3"},null,-1),K={class:"px-3"},M={key:0,class:"px-3"},Q={class:"px-3"},R=["onClick"],W={key:1};function X(e,l,m,Y,Z,_){const f=a("loading-page"),u=a("font-awesome-icon"),g=a("router-link"),b=a("loading-component"),y=a("router-view"),v=a("add-button");return o(),s("div",E,[e.initializing?(o(),c(f,{key:0,color:"#135ea2"})):(o(),s("div",P,[t("div",T,[t("div",U,[t("div",D,[t("h5",null,[i(u,{icon:"fa-solid fa-users"}),t("span",null," الموظفين ("+d(e.empsStore.employees.length)+") ",1)])])]),t("div",I,[t("div",O,[e.empsStore.$state.employees.length==0?(o(),s("div",j," لا يوجد نتائج ")):(o(),s("table",q,[t("thead",F,[t("tr",null,[G,e.authStore.$state.user.abilities.indexOf("*")>-1?(o(),s("th",H,"الراتب")):r("",!0),J])]),t("tbody",null,[(o(!0),s($,null,C(e.empsStore.$state.employees,n=>(o(),s("tr",{key:n.id},[t("td",K,[i(g,{to:`/employees/${n.id}`,class:"text-decoration-none text-black"},{default:h(()=>[t("b",null,d(n.name),1)]),_:2},1032,["to"])]),e.authStore.$state.user.abilities.indexOf("*")>-1?(o(),s("td",M,d(n.salary)+"ج",1)):r("",!0),t("td",Q,[e.authStore.can(e.availableAbilities.employees.delete)?(o(),s("button",{key:0,class:"btn btn-danger",onClick:()=>_.deleteUser(n)},[n.deleting?(o(),c(b,{key:0,width:"20px"})):(o(),s("span",W,[i(u,{icon:"fa-solid fa-trash"}),B(" حذف ")]))],8,R)):r("",!0)])]))),128))])]))])])])])),i(y,null,{default:h(({Component:n})=>[i(A,{name:"page"},{default:h(()=>[(o(),c(z(n)))]),_:2},1024)]),_:1}),!e.initializing&&e.authStore.can(e.availableAbilities.employees.create)?(o(),s("div",{key:2,class:"floating-btn floating-btn-left floating-btn-bottom m-3 d-inline-flex",onClick:l[0]||(l[0]=n=>e.$router.push({name:"employees.add"}))},[i(v)])):r("",!0)])}const se=k(V,[["render",X]]);export{se as default};
